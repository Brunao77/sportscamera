---
import Layout from '../layouts/Layout.astro';
import FormSearchVideo from '../components/FormSearchVideo.jsx'
import { EstablishmentModel } from '../models/establishment.js';

const establishments = await EstablishmentModel.getAll();

let optionsEstablishments = establishments && establishments.map(({establishment_id, name}) => {
	return {value: establishment_id, text:name}
})
---

<Layout title="SportsCamera!">
	<section class="bg-primary w-full md:w-fit text-white md:h-auto h-1/2 text-center flex flex-col items-center justify-center md:rounded-b-xl md:rounded-l-xl md:rounded-br-none gap-2 md:gap-5 py-6 md:py-0">
		<h1 class="font-medium text-4xl">SportsCamera!</h1>
		<p class="m-0 font-light text-l w-3/4">Servicio de grabación en establecimientos deportivos</p>
		<a class="rounded-2xl border p-3" href="/sign-in">INICIAR SESION</a>
	</section>
	<section class="bg-white h-full w-full md:w-fit rounded-t-xl md:rounded-r-xl md:rounded-tl-none flex flex-col gap-2 md:gap-5 items-center justify-center md:p-5 md:px-32">
		<strong class="text-5xl text-primary font-medium text-nowrap">Buscar video</strong>
		{optionsEstablishments ? <FormSearchVideo options={optionsEstablishments} client:visible /> : <span>Aún no hay establecimientos</span>}
		<a class="text-terciary cursor-pointer" href="/contact">Contáctanos!</a>
	</section>
</Layout>
